<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VIT Healthcare - Sign Up</title>
  <link rel="stylesheet" href="/styles/signup.css" />
  <style>
     /* Reset and Base Styles */
 * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', sans-serif;
    background: #F1F1F1;
    display: flex;
    justify-content: center;
    align-items: center;
    /**height: 100vh;*/
    margin: 0;
    padding: 20px;
    flex-direction: column;

  }

  /* Header */
  .header {
    background: linear-gradient(to right, #0f4c75, #3282B8);
    width: 100%;
    padding: 2rem 0;
    /* Increased vertical padding */
    color: white;
    text-align: center;
    position: fixed;
    top: 0;
    left: 0;
    height: 100px;
    /* Fixed height */
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
  }


  /* Header Title */
  .header h1 {
    color: rgb(241, 240, 240);
    font-size: 50px;
    /* Unified font size */
    margin: 0;
  }

  /* Header Subtext */
  .header span {
    font-size: 22px;
    opacity: 0.9;
  }

  select {
    opacity: 0.6;
    font-size: 16px;
    width: 100%;
    padding: 10px;
    border: 1px solid #134d74;
    border-radius: 6px;
    font-size: 14px;
    outline: none;
    background-color: white;
  }

  /* Container */
  .container {
    width: 100%;
    max-width: 600px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    padding: 30px;
    text-align: center;
    padding: 50px;
    margin-top: 100px;
  }

  /* Form Title */
  .container h2 {
    color: #1B262C;
    margin-bottom: 15px;
    font-size: 24px;
  }

  /* Form Inputs */
  form {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  label {
    text-align: left;
    font-size: 14px;
    font-weight: 600;
    color: #555;
  }

  input {
    width: 100%;
    padding: 10px;
    border: 1px solid #3282B8;
    border-radius: 6px;
    font-size: 14px;
  }

  .terms-label {
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
  }

  /* Sign Up Button */
  button {
    width: 100%;
    padding: 12px;
    background: #0F4C75;
    color: #BBE1FA;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    transition: background 0.3s ease;
    margin-top: 10px;
  }

  button:hover {
    background: #03273f;
  }

  /* Links */
  p {
    font-size: 14px;
    color: #555;
    margin-top: 10px;
  }

  a {
    color: #0a3553;
    text-decoration: none;
    font-weight: bold;
  }

  a:hover {
    text-decoration: underline;
  }

  /* Responsive Design */
  @media screen and (max-width: 480px) {
    .container {
      max-width: 100%;
      margin-top: 80px;
      padding: 20px;
    }

    .header {
      padding: 8px;
      font-size: 18px;
    }

    .header h1 {
      font-size: 18px;
    }

    .login-box input,
    .login-box button {
      font-size: 14px;
      padding: 10px;
    }

    .header span {
      font-size: 13px;
    }
  }
  

  @media (max-width: 768px) {
    .header {
      padding: 10px;
      font-size: 22px;
    }

    .header h1 {
      font-size: 38px;
    }

  }


  @media (max-width: 425px) {
    .header {
      padding: 10px;
      /* Reduce padding */
      font-size: 16px;
      /* Decrease font size */
      height: 80px;
      /* Set a fixed height */
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .header h1 {
      font-size: 24px;
      /* Reduce text size */
    }

  }
   
  </style>
</head>

<body>
  <header>
    <div class="header">
      <h1>VIT <span>(Vellore Campus)</span></h1>
    </div>
  </header>

  <div class="container">
    <h2>VIT HEALTHCARE</h2>
    <form id="signupForm" method="POST" action="/students/signup">
      <label for="fullname">Enter your name:</label>
      <input type="text" id="fullname" name="fullname" placeholder="Enter your full name" required />
      <span class="error" id="nameError"></span>
    
      <label for="register_number">Enter your registration number:</label>
      <input type="text" id="register_number" name="register_number" placeholder="Enter your registration number" required />
      <span class="error" id="regError"></span>
    
      <label for="mobile">Enter your mobile number:</label>
      <input type="tel" id="mobile" name="mobile" placeholder="Enter your mobile number" required />
      <span class="error" id="mobileError"></span>
    
      <label for="hostel_block">Select your hostel block:</label>
    <select id="hostel_block" name="hostel_block" placeholder="Enter your hostel block"required>
      <option value="">Select</option>
      <option value="A-T Men's Hostel">A Men's Hostel</option>
      <option value="B Men's Hostel">B Men's Hostel</option>
      <option value="C Men's Hostel">C Men's Hostel</option>
      <option value="D Men's Hostel">D Men's Hostel</option>
      <option value="E Men's Hostel">E Men's Hostel</option>
      <option value="F Men's Hostel">F Men's Hostel</option>
      <option value="G Men's Hostel">G Men's Hostel</option>
      <option value="H Men's Hostel">H Men's Hostel</option>
      <option value="J Men's Hostel">J Men's Hostel</option>
      <option value="K Men's Hostel">K Men's Hostel</option>
      <option value="L Men's Hostel">L Men's Hostel</option>
      <option value="M Men's Hostel">M Men's Hostel</option>
      <option value="N Men's Hostel">N Men's Hostel</option>
      <option value="P Men's Hostel">P Men's Hostel</option>
      <option value="Q Men's Hostel">Q Men's Hostel</option>
      <option value="R Men's Hostel">R Men's Hostel</option>
      <option value="S Men's Hostel">S Men's Hostel</option>
      <option value="T Men's Hostel">T Men's Hostel</option>
      <option value="A Women's Hostel">A Women's Hostel</option>
      <option value="B Women's Hostel">B Women's Hostel</option>
      <option value="C Women's Hostel">C Women's Hostel</option>
      <option value="D Women's Hostel">D Women's Hostel</option>
      <option value="E Women's Hostel">E Women's Hostel</option>
      <option value="F Women's Hostel">F Women's Hostel</option>
      <option value="G Women's Hostel">G Women's Hostel</option>
      <option value="H Women's Hostel">H Women's Hostel</option>
      <option value="J Women's Hostel">J Women's Hostel</option>
    </select>
    <span class="error" id="hostelError"></span>
    
      <label for="gender">Select your gender:</label>
      <select id="gender" name="gender" required>
        <option value="">Select</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
      </select>
      <span class="error" id="genderError"></span>
    
      <label for="email">Enter your email:</label>
      <input type="email" id="email" name="email" placeholder="Enter your email" required />
      <span class="error" id="emailError"></span>
    
      <label for="age">Enter your age:</label>
      <input type="number" id="age" name="age" placeholder="Enter your age" required />
      <span class="error" id="ageError"></span>
    
      <label for="password">Enter your password:</label>
      <input type="password" id="password" name="password" placeholder="Enter your password" required />
      <span class="error" id="passwordError"></span>
    
      <button type="submit">Sign Up</button>
    </form>
    <style>
    .error {
      color: red;
      font-size: 12px;
      display: block;
      margin-top: 2px;
    }
  </style>

    <p>Already have an account? <a href="/">Login here</a></p>
  </div>

  <script src="jquery.min.js"></script>
  <script>
    $(document).ready(function () {
      $("#signupForm").on("submit", async function (e) {
        e.preventDefault();
  
        let isValid = true;
        $(".error").text("");
  
        const form = this;
  
        // Validation
        const name = $("#fullname").val().trim();
        if (name.length === 0 || name.length > 30) {
          $("#nameError").text("Name must be 1â€“30 characters.");
          isValid = false;
        }
  
        const reg = $("#register_number").val().trim();
        const regRegex = /^\d{2}[A-Z]{3}\d{4}$/;
        if (!regRegex.test(reg)) {
          $("#regError").text("Format should be 23BIT0311.");
          isValid = false;
        }
  
        const mobile = $("#mobile").val().trim();
        const mobileRegex = /^\+91\d{10}$/;
        if (!mobileRegex.test(mobile)) {
          $("#mobileError").text("Mobile must start with +91 and be 13 characters.");
          isValid = false;
        }
  
        if ($("#hostel_block").val() === "") {
          $("#hostelError").text("Please select a hostel block.");
          isValid = false;
        }
  
        const gender = $("#gender").val();
        if (gender === "") {
          $("#genderError").text("Gender is required.");
          isValid = false;
        }
  
        const email = $("#email").val().trim();
        const emailRegex = /^([a-zA-Z0-9_\.\-])+\@([a-zA-Z0-9\.])+\.([A-Za-z0-9]){2,4}$/;
        if (!emailRegex.test(email)) {
          $("#emailError").text("Invalid email format.");
          isValid = false;
        }
  
        const age = parseInt($("#age").val().trim());
        if (isNaN(age) || age < 16) {
          $("#ageError").text("Age must be 16 or older.");
          isValid = false;
        }
  
        const password = $("#password").val();
        const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?#&]).{1,}$/;
        if (!passwordRegex.test(password)) {
          $("#passwordError").text("Password must include uppercase, lowercase, digit, and special char.");
          isValid = false;
        }
  
        // Form submission using fetch
        if (isValid) {
          const formData = new FormData(form);
          const data = Object.fromEntries(formData.entries());
  
          try {
            const res = await fetch("/students/signup", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            });
  
            const result = await res.json();
  
            if (res.ok) {
              alert(result.message); // success: "Student registered successfully"
              form.reset();
            } else {
              alert(result.message); // error: "Student already exists"
            }
          } catch (err) {
            alert("Server error: " + err.message);
          }
        }
      });
    });
  </script>  

</body>

</html>